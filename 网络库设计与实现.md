# 网络库设计与实现

## EventLoop设计

​	EventLoop用来进行事件循环，每个线程只能有一个EventLoop，它主要负责IO和定时器事件的分发。它和以往的用一对pipe来唤醒线程不同，而是用eventfd来唤醒线程。它用TimerQueue来用作计时管理，用Poller用来IO multiplexing。创建了EventLoop对象的线程是IO线程，主要功能是运行事件循环EventLoop::loop()。

## Channel设计

​	Channel负责注册与响应IO事件，每个channel对象自始自终都只属于一个EventLoop，因为每个channel对象都只属于某一个IO线程。每个channel对象自始自终只负责一个文件描述符（fd）的IO事件分发，但它并不拥有，析构时不会关闭fd。Channel会把不同的IO事件分发为不同的回调。

## Poll设计

​	Poll是IO multiplexing的封装。Poller::poll()是Poller的核心功能，它调用poll获得当前活动的IO事件，然后填充调用方传入的activeChannels，并返回poll返回的时刻。